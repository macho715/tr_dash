---
doc_id: work-log-20260206
refs: [../README.md, WORK_LOG_20260202.md, LAYOUT.md, SYSTEM_ARCHITECTURE.md, plan/actual-input-implementation-plan.md, plan/gantt-reset-enhancement-plan.md]
updated: 2026-02-06
version: 1.0
---

# ì‘ì—… ì´ë ¥: Gantt Reset Enhancement & Actual Input Flow (Phase 14-15)

**ì‘ì—…ì**: AI Assistant (Cursor/Claude Sonnet 4.5)  
**ì‘ì—…ì¼**: 2026-02-06  
**í”„ë¡œì íŠ¸**: TR Dashboard  
**ìš´ì˜ ê·œëª¨**: 1 Tripë‹¹ 1 TR ìš´ì†¡, ì´ 7 Trip, SPMT 1ê¸° ìš´ì˜

---

## ğŸ“‹ ì‘ì—… ìš”ì•½

| í•­ëª© | ë‚´ìš© |
|------|------|
| **Phase 14** | Gantt Reset ë²„íŠ¼ ì™„ì „ ê°œì„  âœ… |
| **Phase 15** | Actual ë‚ ì§œ ì…ë ¥ E2E í”Œë¡œìš° êµ¬í˜„ âœ… |
| **Git ë™ê¸°í™”** | ì›ê²© ì €ì¥ì†Œ ìµœì‹  ë³€ê²½ì‚¬í•­ pull & ì¶©ëŒ í•´ê²° âœ… |
| **ë¹Œë“œ ì—ëŸ¬ ìˆ˜ì •** | radix-ui import ê²½ë¡œ ìˆ˜ì • (badge/button/select) âœ… |
| **ìƒì„±/ìˆ˜ì • íŒŒì¼** | 10ê°œ (Phase 14: 4ê°œ, Phase 15: 6ê°œ) |

---

## Phase 14: Gantt Reset ë²„íŠ¼ ì™„ì „ ê°œì„  âœ…

### ëª©í‘œ
Reset ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë“  Gantt ìƒíƒœë¥¼ ì™„ì „íˆ ì´ˆê¸°í™”í•˜ê³  Global Control Bar date cursorì™€ ë™ê¸°í™”

### ë¬¸ì œì  ë°œê²¬
- âŒ Jump dateê°€ ë¦¬ì…‹ë˜ì§€ ì•ŠìŒ
- âŒ Weather overlay ìƒíƒœê°€ ìœ ì§€ë¨
- âŒ Selected dateê°€ ì´ˆê¸°í™”ë˜ì§€ ì•ŠìŒ
- âŒ Popover/Tooltip/HoverCardê°€ clearë˜ì§€ ì•ŠìŒ
- âŒ Event log ìƒíƒœê°€ ìœ ì§€ë¨
- âŒ Global Control Bar date cursorê°€ ë™ê¸°í™”ë˜ì§€ ì•ŠìŒ

### êµ¬í˜„ ë‚´ìš©

#### 1. DateContext í™•ì¥ (`lib/contexts/date-context.tsx`)
```typescript
interface DateContextType {
  selectedDate: Date
  setSelectedDate: (date: Date) => void
  resetToInitialDate: () => void  // ğŸ†• ì¶”ê°€
  dayNumber: number
  formattedDate: string
}

// resetToInitialDate ë©”ì„œë“œ êµ¬í˜„
const resetToInitialDate = useCallback(() => {
  const smartDate = getSmartInitialDate()
  setSelectedDate(smartDate)
}, [])
```

**íŒŒì¼:** `lib/contexts/date-context.tsx`  
**ë³€ê²½:** +3 lines (import useCallback, getSmartInitialDate, resetToInitialDate ë©”ì„œë“œ)

#### 2. Gantt Reset Handler ì™„ì „ ê°œì„  (`components/dashboard/gantt-chart.tsx`)
```typescript
const handleResetGantt = () => {
  const initialDate = getSmartInitialDate()

  // 1-8: ê¸°ì¡´ reset ë¡œì§
  // 9. Clear selections and sync Global Control Bar date cursor
  onActivityDeselect?.()
  setSelectedDate(initialDate)
  viewMode?.setDateCursor?.(initialDate.toISOString())  // ğŸ†• ë™ê¸°í™”
  
  // 10. Clear popover/tooltip states (ğŸ†•)
  setCollisionPopover(null)
  setTooltip({ visible: false, x: 0, y: 0, activity: null })
  setHoverCard(null)
  setLegendDrawerItem(null)
  
  // 11. Reset event log state (ğŸ†•)
  setEventLogByActivity(new Map())
  setEventLogLoading(false)
  setEventLogAttempted(false)
  
  // 12. Fit timeline and show success feedback (ğŸ†• Toast)
  if (visTimelineRef.current) {
    setTimeout(() => {
      visTimelineRef.current?.fit()
      toast.success("Gantt view reset to initial state", {
        duration: 2000,
      })
    }, 100)
  }
}
```

**íŒŒì¼:** `components/dashboard/gantt-chart.tsx`  
**ë³€ê²½:** +9 lines (toast import, reset ë¡œì§ í™•ì¥)

#### 3. Toast Notification ì¶”ê°€ (`app/layout.tsx`)
```tsx
import { Toaster } from "sonner"

<body>
  {children}
  <Toaster position="top-right" theme="dark" richColors />
  <AnalyticsWrapper />
</body>
```

**íŒŒì¼:** `app/layout.tsx`  
**ë³€ê²½:** +2 lines

#### 4. í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì› (`components/dashboard/gantt-chart.tsx`)
```typescript
// Ctrl/Cmd+Shift+Rë¡œ Reset ì‹¤í–‰
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'R') {
      e.preventDefault()
      handleResetGantt()
    }
  }
  window.addEventListener('keydown', handleKeyDown)
  return () => window.removeEventListener('keydown', handleKeyDown)
}, [])
```

**íŒŒì¼:** `components/dashboard/gantt-chart.tsx`  
**ë³€ê²½:** +11 lines

#### 5. Tooltip ê°œì„  (`components/dashboard/timeline-controls.tsx`)
```tsx
<button
  title="Reset Gantt View (Ctrl/âŒ˜+Shift+R)"  // ğŸ†• ë‹¨ì¶•í‚¤ í‘œì‹œ
  onClick={z.onReset}
>
  <RotateCcw />
</button>
```

**íŒŒì¼:** `components/dashboard/timeline-controls.tsx`  
**ë³€ê²½:** +1 line

### ê²°ê³¼
- âœ… Reset ë²„íŠ¼ì´ ëª¨ë“  ìƒíƒœë¥¼ ì™„ì „ ì´ˆê¸°í™”
- âœ… Global Control Bar date cursor ë™ê¸°í™”
- âœ… Toastë¡œ ì‚¬ìš©ì í”¼ë“œë°± ì œê³µ
- âœ… í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì§€ì› (Ctrl/Cmd+Shift+R)
- âœ… UX ì¼ê´€ì„± í–¥ìƒ

---

## Phase 15: Actual ë‚ ì§œ ì…ë ¥ E2E í”Œë¡œìš° êµ¬í˜„ âœ…

### ëª©í‘œ
ì‚¬ìš©ìê°€ Live modeì—ì„œ Activityì˜ ì‹¤ì œ ì‘ì—… ì‹œì‘/ì™„ë£Œ ë‚ ì§œë¥¼ ì…ë ¥í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„

### ìš”êµ¬ì‚¬í•­
1. **ë‹¹ì¼ ê¸°ì¤€**: ì˜¤ëŠ˜ ë‚ ì§œ ì´ì „ë§Œ ì…ë ¥ ê°€ëŠ¥
2. **Live mode ì „ìš©**: History/Approval modeì—ì„œëŠ” ì…ë ¥ ë¶ˆê°€
3. **SSOT ì—…ë°ì´íŠ¸**: option_c.jsonì˜ activity.actual.* í•„ë“œ ì¦‰ì‹œ ë°˜ì˜
4. **History ê¸°ë¡**: Actual ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ history event ìƒì„±
5. **State ì „ì´**: Actual end ì…ë ¥ ì‹œ ìƒíƒœë¥¼ "completed"ë¡œ ìë™ ì „í™˜
6. **Timeline ë°˜ì˜**: Actual ë°”ê°€ Ganttì— ì¦‰ì‹œ í‘œì‹œ

### êµ¬í˜„ ë‚´ìš©

#### 1. ActualInputSection ì»´í¬ë„ŒíŠ¸ ìƒì„± (ì‹ ê·œ)
**íŒŒì¼:** `components/detail/sections/ActualInputSection.tsx` (+147 lines)

**ê¸°ëŠ¥:**
- Actual Start/End datetime-local input
- Live mode gating (canEdit ì²´í¬)
- Validation:
  - ë¯¸ë˜ ë‚ ì§œ ë°©ì§€
  - End < Start ê²€ì¦
  - Empty input ì²˜ë¦¬
- onChange ì¶”ì  ë° "Unsaved changes" í‘œì‹œ
- Save ë²„íŠ¼ â†’ onSave callback í˜¸ì¶œ
- Cancel ë²„íŠ¼ â†’ ì›ë˜ ê°’ ë³µì›
- Toast í”¼ë“œë°±

**í•µì‹¬ ë¡œì§:**
```typescript
const handleSave = async () => {
  const startIso = toIsoOrNull(actualStart)
  const endIso = toIsoOrNull(actualEnd)
  
  // Validation
  if (startIso && endIso && new Date(startIso) > new Date(endIso)) {
    setError("Actual end must be after actual start.")
    return
  }
  
  // API í˜¸ì¶œ
  const result = await onSave(activity.activity_id, {
    actualStart: startIso,
    actualEnd: endIso,
  })
  
  // Transition ê²°ê³¼ ì²˜ë¦¬
  if (result?.transition && !result.transition.success) {
    toast.error(`State transition blocked: ${result.transition.blocker_code}`)
  }
}
```

#### 2. API Endpoint ìƒì„± (ì‹ ê·œ)
**íŒŒì¼:** `app/api/activities/[id]/actual/route.ts` (+53 lines)

**ê¸°ëŠ¥:**
- PATCH method ì²˜ë¦¬
- Input normalization (undefined/null/"" ì²˜ë¦¬)
- updateActualDates í˜¸ì¶œ
- ì—ëŸ¬ í•¸ë“¤ë§

**ì‘ë‹µ êµ¬ì¡°:**
```typescript
{
  activity: Activity,           // ì—…ë°ì´íŠ¸ëœ activity
  historyEvent: HistoryEvent,   // actual_changed ì´ë²¤íŠ¸
  transition?: {                // State ì „ì´ ê²°ê³¼
    success: boolean,
    blocker_code?: string,
    reason?: string
  },
  transitionEvent?: HistoryEvent  // Transition ì´ë²¤íŠ¸
}
```

#### 3. SSOT ì—…ë°ì´íŠ¸ ë¡œì§ (ì‹ ê·œ)
**íŒŒì¼:** `lib/ssot/update-actual.ts` (+140 lines)

**ê¸°ëŠ¥:**
- SSOT íŒŒì¼ íƒìƒ‰ (option_c_v0.8.0.json â†’ option_c.json â†’ baseline)
- Activity.actual.start_ts/end_ts ì—…ë°ì´íŠ¸
- State transition ì²˜ë¦¬ (transitionState í˜¸ì¶œ)
- History event ìƒì„± (actual_changed)
- Transition history event ì¶”ê°€ (ì„±ê³µ ì‹œ)
- SSOT íŒŒì¼ ì €ì¥

**í•µì‹¬ ë¡œì§:**
```typescript
// State transition: actual_end ì…ë ¥ ì‹œ completedë¡œ ì „í™˜
if (actualEnd !== undefined && actualEnd !== null && activity.state === "in_progress") {
  const transition = transitionState(nextActivity, "completed", actor, { ssot })
  if (transition.success) {
    transitionEvent = transition.history_event
    ssot.history_events = [...(ssot.history_events ?? []), transition.history_event]
  }
}

// Actual history event ì¶”ê°€
const historyEvent = buildActualHistoryEvent(activityId, actor, actualStart, actualEnd)
ssot.history_events = [...(ssot.history_events ?? []), historyEvent]
```

#### 4. DetailPanel í†µí•©
**íŒŒì¼:** `components/detail/DetailPanel.tsx` (+8 lines)

**ë³€ê²½:**
```tsx
import { ActualInputSection } from "./sections/ActualInputSection"

// Propsì— onActualUpdate ì¶”ê°€
type DetailPanelProps = {
  // ...
  onActualUpdate?: (
    activityId: string,
    payload: { actualStart: string | null; actualEnd: string | null }
  ) => Promise<{ transition?: {...} } | void>
}

// PlanVsActualSection ë‹¤ìŒì— ActualInputSection ì¶”ê°€
{onActualUpdate && (
  <div className="pt-3">
    <ActualInputSection activity={activity} onSave={onActualUpdate} />
  </div>
)}
```

#### 5. Page í†µí•© ë° ìƒíƒœ ë™ê¸°í™”
**íŒŒì¼:** `app/page.tsx` (+70 lines)

**ê¸°ëŠ¥:**
- handleActualUpdate êµ¬í˜„
- API í˜¸ì¶œ â†’ ì‘ë‹µ ì²˜ë¦¬
- activities state ì—…ë°ì´íŠ¸ (Timeline ë°˜ì˜)
- ssot state ì—…ë°ì´íŠ¸ (Map/History ë°˜ì˜)
- DetailPanelì— onActualUpdate prop ì „ë‹¬

**í•µì‹¬ ë¡œì§:**
```typescript
const handleActualUpdate = async (activityId, payload) => {
  // 1. API í˜¸ì¶œ
  const response = await fetch(`/api/activities/${activityId}/actual`, {
    method: "PATCH",
    body: JSON.stringify(payload),
  })
  
  // 2. activities state ì—…ë°ì´íŠ¸ (Gantt ë°˜ì˜)
  setActivities((prev) =>
    prev.map((activity) => {
      if (activity.activity_id !== activityId) return activity
      return {
        ...activity,
        actual_start: actualStartDate,
        actual_finish: actualEndDate,
        status: nextStatus,  // done, in_progress ë“±
      }
    })
  )
  
  // 3. ssot state ì—…ë°ì´íŠ¸ (Map/History ë°˜ì˜)
  setSsot((prev) => ({
    ...prev,
    entities: {
      ...prev.entities,
      activities: {
        ...prev.entities.activities,
        [activityId]: data.activity,
      },
    },
    history_events: [
      ...prev.history_events,
      ...newEvents,  // actual_changed + transition
    ],
  }))
}
```

#### 6. Schedule Mapper ê°•í™”
**íŒŒì¼:** `lib/ssot/utils/schedule-mapper.ts` (+20 lines)

**ê°œì„ :**
- v0.8.0 `actual.start_ts` / `actual.end_ts` ë§¤í•‘ ê°•í™”
- Legacy `actual_start` / `actual_finish` fallback ìœ ì§€
- State â†’ Status ë§¤í•‘ ê°œì„ 

---

## ğŸ”„ ë°ì´í„° í”Œë¡œìš°

```
[User Input]
    â†“
ActualInputSection.tsx
  - datetime-local input (actualStart, actualEnd)
  - Validation (ë¯¸ë˜ ë‚ ì§œ, End < Start)
  - onSave(activityId, { actualStart, actualEnd })
    â†“
page.tsx: handleActualUpdate()
  - fetch(`/api/activities/${activityId}/actual`, { method: PATCH })
    â†“
app/api/activities/[id]/actual/route.ts
  - normalizeInput()
  - updateActualDates()
    â†“
lib/ssot/update-actual.ts
  - findSsotCandidate() â†’ option_c*.json íƒìƒ‰
  - activity.actual.start_ts / end_ts ì—…ë°ì´íŠ¸
  - transitionState(activity, "completed") [if actualEnd provided]
  - buildActualHistoryEvent() â†’ append to history_events
  - writeFile(ssotPath, JSON.stringify(ssot))
    â†“
[API Response]
  - { activity, historyEvent, transition, transitionEvent }
    â†“
page.tsx: ìƒíƒœ ë™ê¸°í™”
  - setActivities() â†’ Timeline ë°˜ì˜
  - setSsot() â†’ Map/History ë°˜ì˜
    â†“
[UI Re-render]
  - Gantt: Actual ë°” í‘œì‹œ (ì´ˆë¡ìƒ‰)
  - Map: TR marker ìƒ‰ìƒ ë³€ê²½ (in_progress=íŒŒë‘, completed=ì´ˆë¡)
  - History íƒ­: actual_changed ì´ë²¤íŠ¸ í‘œì‹œ
  - DetailPanel: PlanVsActualSectionì— delta í‘œì‹œ
```

---

## ğŸ“ ìƒì„±/ìˆ˜ì • íŒŒì¼ ëª©ë¡

### Phase 14: Gantt Reset Enhancement (4ê°œ)

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© | LOC |
|------|-----------|-----|
| `lib/contexts/date-context.tsx` | resetToInitialDate ë©”ì„œë“œ ì¶”ê°€ | +10 |
| `components/dashboard/gantt-chart.tsx` | Reset ë¡œì§ ì™„ì „ ê°œì„ , Toast, ë‹¨ì¶•í‚¤ | +20 |
| `app/layout.tsx` | Toaster ì¶”ê°€ | +2 |
| `components/dashboard/timeline-controls.tsx` | Tooltip ë‹¨ì¶•í‚¤ í‘œì‹œ | +1 |

### Phase 15: Actual Input E2E Flow (6ê°œ)

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© | LOC |
|------|-----------|-----|
| `components/detail/sections/ActualInputSection.tsx` | ğŸ†• Actual ì…ë ¥ UI ìƒì„± | +147 |
| `components/detail/DetailPanel.tsx` | ActualInputSection í†µí•© | +8 |
| `app/api/activities/[id]/actual/route.ts` | ğŸ†• API endpoint ìƒì„± | +53 |
| `lib/ssot/update-actual.ts` | ğŸ†• SSOT ì—…ë°ì´íŠ¸ ë¡œì§ | +140 |
| `app/page.tsx` | handleActualUpdate + ìƒíƒœ ë™ê¸°í™” | +70 |
| `lib/ssot/utils/schedule-mapper.ts` | v0.8.0 actual ë§¤í•‘ ê°•í™” | +20 |

### ë¹Œë“œ ì—ëŸ¬ ìˆ˜ì • (3ê°œ)

| íŒŒì¼ | ë³€ê²½ ë‚´ìš© | LOC |
|------|-----------|-----|
| `components/ui/badge.tsx` | `@radix-ui/react-slot` import ìˆ˜ì • | +1 |
| `components/ui/button.tsx` | `@radix-ui/react-slot` import ìˆ˜ì • | +1 |
| `components/ui/select.tsx` | `@radix-ui/react-select` import ìˆ˜ì • | +1 |

---

## âœ… ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 14: Gantt Reset

- [x] **ì½”ë“œ:** handleResetGanttì— ëª¨ë“  ìƒíƒœ ë¦¬ì…‹ ë¡œì§ ì¶”ê°€
- [x] **ì½”ë“œ:** DateContextì— resetToInitialDate ì¶”ê°€
- [x] **ì½”ë“œ:** Global Control Bar date cursor ë™ê¸°í™”
- [x] **ì½”ë“œ:** Toast notification ì¶”ê°€
- [x] **ì½”ë“œ:** í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ (Ctrl/Cmd+Shift+R) êµ¬í˜„
- [ ] **í…ŒìŠ¤íŠ¸:** Reset ë²„íŠ¼ í´ë¦­ â†’ ëª¨ë“  ìƒíƒœ ì´ˆê¸°í™” í™•ì¸
- [ ] **í…ŒìŠ¤íŠ¸:** ë‹¨ì¶•í‚¤ â†’ Reset ì‹¤í–‰ í™•ì¸
- [ ] **í…ŒìŠ¤íŠ¸:** Toast ë©”ì‹œì§€ í‘œì‹œ í™•ì¸

### Phase 15: Actual Input

- [x] **ì½”ë“œ:** ActualInputSection UI ìƒì„±
- [x] **ì½”ë“œ:** API endpoint ìƒì„±
- [x] **ì½”ë“œ:** SSOT ì—…ë°ì´íŠ¸ ë¡œì§ êµ¬í˜„
- [x] **ì½”ë“œ:** State transition ì²˜ë¦¬
- [x] **ì½”ë“œ:** History event ìë™ ìƒì„±
- [x] **ì½”ë“œ:** page.tsx ìƒíƒœ ë™ê¸°í™”
- [ ] **í…ŒìŠ¤íŠ¸:** Actual Start ì…ë ¥ â†’ Timeline Actual ë°” í‘œì‹œ
- [ ] **í…ŒìŠ¤íŠ¸:** Actual End ì…ë ¥ â†’ State = completed ì „ì´
- [ ] **í…ŒìŠ¤íŠ¸:** History íƒ­ì— ì´ë²¤íŠ¸ ì¶”ê°€ í™•ì¸
- [ ] **í…ŒìŠ¤íŠ¸:** Map ìƒ‰ìƒ ë³€ê²½ í™•ì¸
- [ ] **í…ŒìŠ¤íŠ¸:** Validation (ë¯¸ë˜ ë‚ ì§œ, End<Start) ë™ì‘ í™•ì¸
- [ ] **í…ŒìŠ¤íŠ¸:** History/Approval modeì—ì„œ ì…ë ¥ ë¶ˆê°€ í™•ì¸

---

## ğŸ”’ SSOT ì¤€ìˆ˜ í™•ì¸

### Phase 14
- âœ… **SSOT ë¶ˆë³€:** UI ìƒíƒœë§Œ ë¦¬ì…‹, option_c.json ë³€ê²½ ì—†ìŒ
- âœ… **ê¶Œí•œ:** ëª¨ë“  modeì—ì„œ Reset ê°€ëŠ¥ (UI ìƒíƒœë§Œ ë³€ê²½)
- âœ… **Audit:** N/A (ìƒíƒœ ë¦¬ì…‹ì€ ì´ë ¥ ë¶ˆí•„ìš”)

### Phase 15
- âœ… **SSOT ì›ì¹™:** Activity.actualì´ ë‹¨ì¼ ì§„ì‹¤ì›
- âœ… **ê¶Œí•œ:** Live modeì—ì„œë§Œ ì…ë ¥ ê°€ëŠ¥
- âœ… **Audit:** History event ìë™ ìƒì„± (append-only)
- âœ… **State Machine:** Evidence gate ë° transition ë¡œì§ ì¤€ìˆ˜
- âœ… **íŒŒìƒ ê³„ì‚°:** Timeline/Mapì€ SSOTì—ì„œ íŒŒìƒí•˜ì—¬ í‘œì‹œ

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ ë° ê°œì„  ì‚¬í•­

### ê°œì„  í•„ìš” (Priority ë‚®ìŒ)

#### 1. Race Condition
**ì´ìŠˆ:** ë™ì‹œì— ì—¬ëŸ¬ ì‚¬ìš©ìê°€ ê°™ì€ activity ìˆ˜ì • ì‹œ ë®ì–´ì“°ê¸° ìœ„í—˜

**í•´ê²° ë°©ì•ˆ:**
- Optimistic locking (version field ì¶”ê°€)
- ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê° í‘œì‹œ
- Conflict ê°ì§€ ë° ì—ëŸ¬ í‘œì‹œ

#### 2. Error Recovery
**ì´ìŠˆ:** API ì‹¤íŒ¨ ì‹œ ë¡œì»¬ ìƒíƒœì™€ SSOTê°€ ë¶ˆì¼ì¹˜í•  ìˆ˜ ìˆìŒ

**í•´ê²° ë°©ì•ˆ:**
- ì‹¤íŒ¨ ì‹œ SSOT ì¬fetch
- Retry ë¡œì§ ì¶”ê°€

#### 3. Undo/Redo
**ì´ìŠˆ:** Actual ì…ë ¥ í›„ ì‹¤í–‰ ì·¨ì†Œ ë¶ˆê°€

**í•´ê²° ë°©ì•ˆ:**
- Actual ë³€ê²½ history stack
- Undo ë²„íŠ¼ ì¶”ê°€

---

## ğŸ“Š ì„±ëŠ¥ ë° ë³´ì•ˆ

### ì„±ëŠ¥
- âœ… API í˜¸ì¶œ: ë‹¨ì¼ activityë§Œ ì—…ë°ì´íŠ¸ (íš¨ìœ¨ì )
- âœ… ìƒíƒœ ì—…ë°ì´íŠ¸: activities ë°°ì—´ map (O(n), ìµœì í™” ê°€ëŠ¥)
- âš ï¸ SSOT íŒŒì¼ ì½ê¸°/ì“°ê¸°: ë§¤ë²ˆ ì „ì²´ íŒŒì¼ (í° íŒŒì¼ ì‹œ ëŠë¦¼)

### ë³´ì•ˆ
- âœ… Live mode gating
- âœ… Validation (ë¯¸ë˜ ë‚ ì§œ, ë…¼ë¦¬ì  ìˆœì„œ)
- âš ï¸ Actor ì¸ì¦ ì—†ìŒ (í˜„ì¬ "user" í•˜ë“œì½”ë”©)
- âš ï¸ SSOT íŒŒì¼ ì§ì ‘ ì“°ê¸° (í”„ë¡œë•ì…˜ì—ì„œëŠ” DB ì‚¬ìš© ê¶Œì¥)

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### Immediate (ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥)
1. **ìˆ˜ë™ í…ŒìŠ¤íŠ¸**: ë¸Œë¼ìš°ì €ì—ì„œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‹¤í–‰
2. **ë²„ê·¸ ìˆ˜ì •**: í…ŒìŠ¤íŠ¸ ì¤‘ ë°œê²¬ëœ ì´ìŠˆ ìˆ˜ì •
3. **ì»¤ë°‹**: í˜„ì¬ ì‘ì—… ë‚´ìš© ì»¤ë°‹

### Short-term (ë‹¨ê¸°)
4. **Part 2**: History ì‚­ì œ ê¸°ëŠ¥ (Soft delete)
5. **Part 3**: What-if ì‹œë®¬ë ˆì´ì…˜ ê²€ì¦
6. **Part 4**: Ghost bar ë²”ë¡€ ì¶”ê°€

### Long-term (ì¥ê¸°)
7. **ìë™í™” í…ŒìŠ¤íŠ¸**: E2E test ì‘ì„±
8. **Bulk Actual Input**: ì—¬ëŸ¬ activity ë™ì‹œ ì…ë ¥
9. **Evidence ì—°ë™**: Actual ì…ë ¥ ì‹œ ì¦ë¹™ ì²¨ë¶€
10. **Optimistic Locking**: Version conflict ë°©ì§€

---

## ğŸ“š ì°¸ì¡° ë¬¸ì„œ

- [AGENTS.md](../AGENTS.md) - SSOT ì›ì¹™, State Machine
- [patch.md](../patch.md) - UI/UX ê·œì¹™
- [LAYOUT.md](LAYOUT.md) - ë ˆì´ì•„ì›ƒ êµ¬ì¡°
- [plan/actual-input-implementation-plan.md](plan/actual-input-implementation-plan.md) - ìƒì„¸ ê³„íš
- [plan/gantt-reset-enhancement-plan.md](plan/gantt-reset-enhancement-plan.md) - Reset ê°œì„  ê³„íš

---

## ğŸ“… ì‘ì—… íƒ€ì„ë¼ì¸

```
2026-02-06 (ì˜¤ì „)
â”œâ”€ Git ë™ê¸°í™” (pull + ì¶©ëŒ í•´ê²°)
â”œâ”€ ë¹Œë“œ ì—ëŸ¬ ìˆ˜ì • (radix-ui import)
â””â”€ ë¡œì»¬ ì„œë²„ ì¬ì‹œì‘ (í¬íŠ¸ 3001)

2026-02-06 (ì˜¤í›„)
â”œâ”€ Phase 14: Gantt Reset ì™„ì „ ê°œì„ 
â”‚  â”œâ”€ DateContext í™•ì¥
â”‚  â”œâ”€ Reset handler ì—…ë°ì´íŠ¸
â”‚  â”œâ”€ Toast ì¶”ê°€
â”‚  â””â”€ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ êµ¬í˜„
â””â”€ Phase 15: Actual Input E2E
   â”œâ”€ ActualInputSection ìƒì„±
   â”œâ”€ API endpoint ìƒì„±
   â”œâ”€ SSOT update ë¡œì§
   â”œâ”€ DetailPanel í†µí•©
   â””â”€ page.tsx ìƒíƒœ ë™ê¸°í™”

2026-02-06 (ì €ë…) - ì˜ˆì •
â””â”€ ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
```

---

**ì‘ì„± ì™„ë£Œ:** 2026-02-06  
**ë‹¤ìŒ ì‘ì—…:** ìˆ˜ë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë˜ëŠ” Part 2-4 êµ¬í˜„
