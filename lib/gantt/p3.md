# TR Dash 개선점 Deep Insight Report (Repo + Deployed App 기반)

## 0) 관찰 기준

* **Deployed App**: `trdash.vercel.app`의 화면 구성/카피/섹션 구조를 기준으로 UX·운영 흐름을 분석했습니다. ([TR Transport Dashboard][1])
* **Repo**: GitHub 메인 README에 명시된 기능/아키텍처/테스트 현황을 기준으로 제품/엔지니어링 개선 포인트를 추출했습니다. ([GitHub][2])
* 참고: 제공하신 preview URL(`trdash-febx...vercel.app`)은 제 쪽에서 열람이 불가했고, 대신 public 도메인(`trdash.vercel.app`)을 기준으로 점검했습니다. ([TR Transport Dashboard][1])

---

## 1) Executive Summary (가장 임팩트 큰 6개)

현재 대시보드는 **“모니터링(현황판)” + “플래닝/리플로우(편집기)” + “감사/승인(거버넌스)”**가 한 화면/한 플로우에 혼재돼 있습니다. 기능은 강력하지만, 운영 현장에서는 이 혼재가 **인지부하·오판 리스크·채택 장벽**으로 작동할 가능성이 큽니다.

우선순위 Top 6:

1. **Mode 분리(Monitor / Plan / Approve / Audit)**: “지금 운영 판단”과 “스케줄 편집”을 UI/권한/색상/인터랙션으로 분리
2. **Decision-First 헤더 재구성**: GO/NO-GO, 다음 결정 창, 금일/48h 핵심 작업, 블로커를 상단 1스크린에 “원인+근거+조치”로 정리
3. **시간·날짜 의미 체계 통일(UTC vs Local)**: Selected Date/Day No./현지 결정창이 섞여 있어 오판 여지 → “운영 기준시간(현지)”과 “Gantt 인덱스(UTC)”를 동시에 명시
4. **리스크를 ‘카테고리’에서 ‘임계치/영향도’로 승격**: 현재는 태그/텍스트 중심 → 임계치, 신뢰도, 영향 구간(어느 Voyage/Activity)에 걸리는지 연결
5. **Empty state/로드 UX 개선**: History/Evidence/Readiness가 “Load SSOT …”로 끝남 → 사용자가 무엇을 해야 데이터가 생기는지 명확히
6. **배포/보안/품질 게이트 정리**: `.env.vercel.production` 파일 존재는 잠재적 리스크(내용이 무엇이든 원칙상) → 즉시 점검/정리 + CI에서 테스트/린트/타입체크 자동화

---

## 2) 현재 제품이 잘하고 있는 점 (강점)

### 2.1 “현장 운용 언어”를 UI로 번역한 구성

* Shift Brief(일일 펄스), 48시간 내 중요 작업, 포커스/결정 창 같은 운영자 관점 카피가 이미 존재합니다. ([TR Transport Dashboard][1])
* Voyage 7개 개요/스케줄 표/Gantt로 **“요약→디테일→타임라인”**의 기본 골격을 갖췄습니다. ([TR Transport Dashboard][1])

### 2.2 스케줄 리플로우/충돌 탐지/비교 모드의 “플래닝 엔진” 내장

* README 기준으로 reflowSchedule(의존성 그래프/사이클 탐지/lock·constraint 존중/UTC 연산)까지 포함되어 있어 단순 대시보드가 아니라 **시뮬레이터/플래너**로 진화 가능한 구조입니다. ([GitHub][2])
* Compare Mode(ghost bars, baseline vs compare)와 Preview 패널이 있어 “변경의 결과”를 보여줄 준비가 되어 있습니다. ([GitHub][2])

### 2.3 SSOT(단일 진실 공급원) 원칙을 선언하고 구조를 맞춘 점

* schedule SSOT(옵션 C JSON → mapper → schedule-data → ganttRows) 흐름이 README에 명시돼 있고, 계산/렌더 분리 원칙도 적혀 있습니다. ([GitHub][2])

---

## 3) Deep Insight: “이 대시보드가 막히는 지점”의 본질

### Insight A — “한 화면에 4가지 제품”이 들어있다 (채택/안전성의 핵심 리스크)

현재 화면은 다음이 동시에 존재합니다:

* **모니터링(상황판)**: KPI, Alerts, Shift Brief, Notes ([TR Transport Dashboard][1])
* **플래닝/편집(스케줄 변경)**: Gantt 인터랙션, /bulk, /undo, /redo 등 커맨드 팔레트 ([TR Transport Dashboard][1])
* **검증/승인**: Verification, Approval, Evidence gate(README 구조상) ([GitHub][2])
* **감사/보고**: History/Evidence, Export, Trip Closeout ([TR Transport Dashboard][1])

이게 왜 문제냐면:

* 운영 현장에서는 **“읽기(상태확인)”와 “쓰기(변경)”가 혼재될수록 실수 비용**이 급증합니다.
* 특히 스케줄 변경은 **승인/근거/책임소재**가 따라야 해서, 제품 레벨에서 “모드”가 분리돼야 합니다.

**개선 제안**

* 상단에 “Mode Switch”를 두고 아래를 강제:

  * **Monitor 모드(기본)**: 읽기 전용, 클릭은 drill-down만
  * **Plan 모드**: 변경/리플로우/프리뷰 활성화, 화면 테두리·배경 톤 변경(“편집 중” 명확화)
  * **Approve 모드**: diff/근거/체크리스트 중심, 승인 버튼/서명(사용자·시간) 강조
  * **Audit 모드**: History/Evidence/Export 중심
* 커맨드 팔레트(`/bulk`, `/undo`, `/redo`)는 Plan 모드에서만 노출/활성화. ([TR Transport Dashboard][1])

---

### Insight B — “Decision Quality”가 아직 UI에 완전히 올라오지 않았다

현재 Alerts Triage에서 “결정: GO”와 코드(WX_WAVE, WX_WIND), 갱신일이 보이지만, **임계치·근거·영향범위**가 UI에서 닫혀 있습니다. ([TR Transport Dashboard][1])

운영 관점에서 필요한 건:

* GO/NO-GO의 **근거(예: 풍속/파고/조류, 기준값, 신뢰도)**
* 그 결정이 **어느 활동(Load-out/Sea Transport/Load-in…)**에 영향을 주는지
* “결정했을 때의 다음 액션”이 무엇인지(예: permit 확인, mooring team call, ballast window 확보)

**개선 제안 (Decision Card 표준화)**

* Alert를 카드화:

  * **Decision**: GO / NO-GO / HOLD(보류)
  * **Why**: 임계치·측정값·예보 구간(텍스트 + 미니차트)
  * **Impact**: 영향 Voyage/Activity 리스트 + 지연 예상(+Xd)
  * **Action**: 체크리스트(승인/증빙 링크 포함)
* 현재 존재하는 “즉시 조치(Immediate Action)” 텍스트를 **Action 체크리스트로 구조화**. ([TR Transport Dashboard][1])

---

### Insight C — 시간/날짜의 “표기”는 있는데 “의미 체계”가 한 번 더 필요

* 헤더에 “Selected Date: Jan 26, 2026” 및 “날짜(UTC)” 표기, Shift Brief에는 “다음 결정 창: 18:00 현지”가 동시 표출됩니다. ([TR Transport Dashboard][1])
* 또한 스케줄 테이블에서 “선택일이 모든 항차 구간 밖입니다” 메시지가 뜨는 것으로 보아, 기본 선택일이 운영 맥락과 어긋날 수 있습니다. ([TR Transport Dashboard][1])
* README에서도 UTC 정렬 버그를 별도로 다뤘을 정도로(Selected Date UTC 정렬) 시간 축은 민감 포인트입니다. ([GitHub][2])

**개선 제안 (Two-Clock Model)**

* 화면 전역을 **두 개의 시간**으로 고정:

  1. **Operational Time (Local)**: 현지 기준, 의사결정·교대·작업 창
  2. **Schedule Index (UTC day)**: Gantt/계산 엔진 기준
* 표기 규칙:

  * “Selected Date (UTC Day Index)”처럼 **라벨 자체에 의미를 박제**
  * 상단에 “Local Now / UTC Index” 동시 표출 (예: `Local: 2026-02-01 18:10 | UTC day index: 2026-02-01`)
* “선택일이 항차 구간 밖”일 때는 단순 안내가 아니라 **추천 액션 버튼** 제공:

  * “활성 항차로 이동” (이미 존재) + “다음 48h 핵심 작업 날짜로 이동” + “현재(현지)로 이동” ([TR Transport Dashboard][1])

---

### Insight D — 리스크 필터(기상/자원/허가)가 “필터”로 끝나면 아깝다

상단에 리스크 카테고리 UI가 있지만(없음/전체 | 기상/자원/허가), 리스크가 **어떤 작업을 막는지**까지 연결되면 가치가 급상승합니다. ([TR Transport Dashboard][1])

**개선 제안: Risk → Constraint → Schedule 연결**

* 각 리스크를 “제약(Constraint)” 타입으로 모델링:

  * 적용 범위: Voyage/Stage/Activity
  * 유효 기간: 시작/끝
  * 강도: Soft/Hard
  * 해소 조건: Evidence/Permit/Weather window
* Gantt의 “하이라이트(지연/잠금/제약)”는 이미 컨트롤이 있으니, **리스크 선택 시 해당 제약이 걸린 바만 강조**하도록 연결. ([TR Transport Dashboard][1])

---

### Insight E — History/Evidence/Readiness의 “빈 상태”가 사용자에게 과제를 전가

하단에서:

* “History Evidence Compare Diff Trip Closeout” 탭은 보이는데
* “Load SSOT to display history / Load SSOT for readiness”로 끝납니다. ([TR Transport Dashboard][1])

이 상태는 사용자가 “무엇을 로드해야 하는지 / 어디서 로드하는지 / 로드가 성공하면 무엇이 달라지는지”를 추측해야 합니다.

**개선 제안**

* Empty state를 “교육형”으로:

  * (1) **왜 비어있는지**: “현재 브라우저에 SSOT 로드 전입니다”
  * (2) **즉시 버튼**: “SSOT 로드(기본 옵션C)”, “최근 Baseline 불러오기”, “샘플 데이터 보기”
  * (3) **보안 안내**(내부 프로젝트 특성상): 로컬 저장/공유 규칙
* README에 “History/Evidence localStorage 저장”이 명시되어 있으니, 멀티 디바이스/팀 협업을 위해 **서버 저장(권한/감사)**로 확장하는 로드맵을 함께 제시하는 게 자연스럽습니다. ([GitHub][2])

---

## 4) 엔지니어링/품질/보안 관점 개선 포인트

### 4.1 배포/보안: env 파일 커밋은 즉시 점검 대상

Repo 루트에 `.env.vercel.example` 뿐 아니라 `.env.vercel.production` 파일이 존재합니다. ([GitHub][2])
내용이 무엇이든, **원칙적으로 production env는 저장소에 존재하면 안 되는 케이스**가 많습니다(특히 토큰/키/엔드포인트).

**개선 제안 (즉시)**

* `.env.vercel.production` 내용 점검

  * 민감정보가 1%라도 있으면: **즉시 폐기 + 키 로테이션 + git 히스토리 제거 전략 검토**
* `.gitignore`로 env 패턴 강제 + CI에서 “secret scanning” 성격의 체크 추가

### 4.2 Gantt 로딩/성능: “Loading Gantt…”는 신뢰에 타격

Gantt 섹션에서 “Loading Gantt…”가 노출됩니다. ([TR Transport Dashboard][1])
실제로는 로드가 되더라도, “중요한 운영 화면에서 핵심 시각화가 늦는 경험”은 신뢰를 깎습니다.

**개선 제안**

* Gantt는 무조건:

  * **스켈레톤**(축/행 구조만 먼저)
  * 1초 넘으면 “데이터 변환 중/렌더링 중” 단계 표시(사용자에게 이유 제공)
* vis-timeline 사용을 명시하고 있으므로(“Gantt: vis-timeline”), 번들 최적화(동적 import, row virtualization) 우선순위 높음. ([TR Transport Dashboard][1])

### 4.3 테스트/품질 게이트: README에 “테스트 167개 + 1개 실패”가 공개됨

README에 Vitest 167 tests와, 특정 test suite 실패 원인(import path)까지 명시돼 있습니다. ([GitHub][2])
이건 “품질에 대한 솔직함”이라는 장점도 있지만, 외부 공유 시엔 **신뢰 비용**이기도 합니다.

**개선 제안**

* main 브랜치 기준으로는 **항상 green**(CI 필수)
* “known failing test”는 README가 아니라 issue/워크로그로 격리
* CI 파이프라인: `typecheck + lint + test + build` 최소 구성

---

## 5) UX/제품 개선 Backlog (우선순위 + 기대효과)

아래는 “운영 채택(현장) → 의사결정 품질 → 변경 거버넌스” 순으로 정렬했습니다.

### P0 (즉시/1~3일)

1. **Mode 분리 UI 뼈대**

   * Monitor/Plan/Approve/Audit 탭(또는 토글) 추가
   * Plan 모드에서만 편집 기능 활성화(커맨드 팔레트 포함) ([TR Transport Dashboard][1])
2. **시간 표기 Two-Clock 도입**

   * Local + UTC Index 동시 표기
   * “Selected Date” 라벨에 의미 명시 ([TR Transport Dashboard][1])
3. **History/Evidence/Readiness Empty state 개선**

   * “Load SSOT…”를 행동 유도형 UI로 교체 ([TR Transport Dashboard][1])
4. **env 파일 점검/정리**

   * `.env.vercel.production` 처리 ([GitHub][2])

### P1 (1~2주)

5. **Decision Card 표준화(Alerts Triage 리디자인)**

   * Decision/Why/Impact/Action 구조로 고정
   * “Immediate Action”을 체크리스트화 ([TR Transport Dashboard][1])
6. **리스크 → 제약 → Gantt 하이라이트 연결**

   * 상단 리스크 필터 클릭 시 해당 제약이 걸린 activity만 하이라이트 ([TR Transport Dashboard][1])
7. **Voyage 카드에 “Now/Next/Blocker” 고정 슬롯 추가**

   * 현재 Voyage의 다음 48h critical tasks(이미 숫자 존재)를 실제 작업 리스트로 노출 ([TR Transport Dashboard][1])

### P2 (3~6주)

8. **Plan→Approve 워크플로우**

   * Preview에서 “변경 요약(Impact Report)” 자동 생성
   * Approve 모드에서 승인/근거/증빙 링크를 묶어 1-click export ([GitHub][2])
9. **감사/협업 저장소**

   * localStorage 기반은 개인용에 강함 → 팀 단위 운영을 위해 서버 저장/권한/감사로그 확장(최소한 변경 이력/승인 이력부터)

### P3 (6주+)

10. **예측/권고(Recommendation) 레이어**

* “기상 창 + 조위 + 자원 + 허가”를 조합해서, 최적의 작업창/대안 시나리오 추천
* 여기서 reflow 엔진을 진짜 가치(“대안 제시”)로 끌어올릴 수 있음 ([GitHub][2])

---

## 6) 성공 지표(이 대시보드가 ‘좋아졌다’를 측정하는 방법)

운영/제품/엔지니어링으로 나눠 제안합니다.

### 운영 KPI (Outcome)

* **Decision latency**: “오늘 GO/NO-GO 판단”까지 걸린 시간(회의 시작~결정 확정)
* **Change lead time**: 스케줄 변경 제안→승인→적용까지 시간
* **Schedule adherence**: Voyage별 계획 대비 실제 편차(일수), 주요 milestone 지연률

### 제품 KPI (Adoption/Usability)

* “첫 5분 내” 사용자가 답할 수 있어야 하는 질문 3개:

  1. 지금 활성 항차는? (무슨 단계?)
  2. 다음 결정은 언제/무엇 때문에?
  3. 48시간 내 가장 위험한 작업은?
* 커맨드 팔레트 사용률(/bulk, /undo 등) vs 실수율(되돌리기 발생률)

### 엔지니어링 KPI (Reliability)

* Gantt TTI(Time to Interactive)
* 런타임 에러율(특히 vis-timeline 렌더/데이터 변환)
* 배포 후 회귀(특정 Voyage/Date에서 깨짐) 빈도

---

## 7) 결론: “운영의사결정 도구”로 한 단계 올리려면

지금 상태는 기능적으로는 이미 **플래너급(리플로우/프리뷰/비교/제약)**입니다. ([GitHub][2])
다음 단계는 “기능 추가”보다, 아래 2가지를 정교하게 만드는 쪽이 ROI가 큽니다.

1. **모드/권한/감사(거버넌스) 설계**: 실수와 책임소재를 UI가 줄여줘야 함
2. **Decision-first IA(정보구조) 재정렬**: 현장 운영자는 “정보”가 아니라 “판단 가능한 근거 + 다음 액션”이 필요

원하시면, 위 P0~P1 항목을 기준으로 **실제 화면 단위(컴포넌트/섹션) 리디자인 초안**(와이어프레임 수준 텍스트 스펙)과 **백로그를 이슈 템플릿 형태**로 정리해드릴 수 있습니다.

[1]: https://trdash.vercel.app/ "HVDC TR Transport Dashboard - AGI Site"
[2]: https://github.com/macho715/tr_dash.git "GitHub - macho715/tr_dash"
