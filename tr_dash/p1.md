## Exec (ë°”ë¡œ ì°©ìˆ˜ ë²”ìœ„)

1. **P0 ë³´ì•ˆ/ë°°í¬ ìœ„ìƒ**ë¶€í„° ì¦‰ì‹œ ì²˜ë¦¬: `.env.vercel.production` ë ˆí¬ ì¶”ì  ì œê±° + `.gitignore` ê°•í™” + í‚¤ ë¡œí…Œì´ì…˜(í•´ë‹¹ ì‹œ). ([GitHub][1])
2. **History/Evidence/Approval â€œappend-onlyâ€ ì €ì¥ì†Œ**(DB)ë¡œ ë¶„ë¦¬ ì„¤ê³„ â†’ UIëŠ” ê¸°ì¡´ `HistoryEvidencePanel` íë¦„ ìœ ì§€. *(ê°€ì •: í˜„ì¬ History/Evidenceê°€ ë¸Œë¼ìš°ì € ì €ì¥ ê¸°ë°˜ì¼ ê°€ëŠ¥ì„±)*  nnce ëª¨ë“œ ë¶„ë¦¬**ëŠ” ì´ë¯¸ ì¡´ì¬í•˜ëŠ” `ViewMode(Live/History/Approval/Compare)`ë¥¼ í™œìš©í•´ â€œí‘œì‹œ/ê¶Œí•œ/ì•¡ì…˜â€ë§Œ ì¬ë°°ì¹˜ë¡œ ì¶”ì§„.  ì„±rBoundary + fallbackâ€ë¡œ *í•µì‹¬ ìœ„ì ¯ ë¬´ì¤‘ë‹¨* ë³´ì¥(í˜„ì¬ env ê¸°ë°˜ ì—”ì§„ ë¶„ê¸° êµ¬ì¡°ê°€ ì´ë¯¸ ì¡´ì¬). 

---

## EN Sourocs â€” **`vercel env`** (Last updated **2025-09-24**) ([Vercel][2])

2. Vercel Blog â€” **Introducing React Best Practices** (Published **2026-01-14**) ([Vercel][3])
3. GitHub â€” **supabase/supa_audit** (archived **2025-02-16**, â€œrecord_versionâ€ ê¸°ë°˜ audit í…Œì´ë¸”) ([GitHub][4])

---

## ê°œì„  ì‹¤í–‰ ë°±ë¡œê·¸ (PR ë‹¨ìœ„ë¡œ ìª¼ê°œì„œ)

| No | Item                                              | Value                                                           | Risk             | Evidence/ê°€ì •                                      |
| -: | ------------------------------------------------- | --------------------------------------------------------------- | ---------------- | ------------------------------------------------ |
|  1 | P0: `.env.vercel.production` ì œê±° + ignore          | ë ˆí¬ì—ì„œ íŒŒì¼ ì¶”ì  ì œê±°, ì˜ˆì œë§Œ ìœ ì§€                                           | **CRITICAL(ë³´ì•ˆ)** | ë ˆí¬ ë£¨íŠ¸ì— `.env.vercel.production` ì¡´ì¬ ([GitHub][1]) |
|  2 | P0: Vercel Env ìš´ì˜ í‘œì¤€í™”                             | `vercel env pull`/Vercel Dashboardë¡œë§Œ ê´€ë¦¬                         | MED              | Vercel CLI ë¬¸ì„œ ([Vercel][2])                      |
|  3 | P1: Append-only ë¡œê·¸ ì €ì¥ì†Œ(History/Evidence/Approval) | DB í…Œì´ë¸” + API/Server Action + UI ì—°ê²°                              | HIGH             | supa_auditì˜ â€œrecord_versionâ€ íŒ¨í„´ ì°¸ê³  ([GitHub][4]) |
|  4 | P1: ViewMode ê¸°ë°˜ IA ë¶„ë¦¬                             | Live=Execution / Compare=Planning / Approval+History=Governance | MED              | ViewMode/ë ˆì´ì•„ì›ƒ êµ¬ì¡° ë¬¸ì„œí™”ë¨                            |
|  5 | P1: Gantt ë¬´ì¤‘ë‹¨(í´ë°±)                                 | dynamic import + error boundary + skeleton                      | MED              | vis/custom ì—”ì§„ ë¶„ê¸° ì´ë¯¸ ì¡´ì¬(ê°œì„  ì—¬ì§€)                    |
|  6 | P2: Explainable Reflow(why/impact) ê°•í™”             | ì˜í–¥ Top N, ì—°ì‡„ ì´ë™ ê·¼ê±° ê·¸ë˜í”„/ë¦¬ìŠ¤íŠ¸                                      | LOW~MED          | reflow/preview/why íŒ¨ë„ ì—°ê²°ì´ ì´ë¯¸ ì¡´ì¬                  |

---

## Options A/B/C (Cost/Risk/Time)

| Option ---|---|
| A | **ë³´ì•ˆ(P0)ë§Œ ì¦‰ì‹œ PR**: env íŒŒì¼ ì œê±° + ignore + ìš´ì˜ë¬¸ì„œ | AED 0.00 | ë‚®ìŒ | 0.50~1.00d |
| B | A + **append- â€œí…ìŠ¤íŠ¸ ë¡œê·¸ + ë©”íƒ€(Trip/Activity/Author/ts)â€ | AED 0.00 + DBìš”ê¸ˆ | ì¤‘ê°„ | 2.00~4.00d |
| C | B + **Governance(ìŠ¹ì¸/ê¶Œí•œ/RLS) + Explai AED 0.00 + DBìš”ê¸ˆ | ì¤‘ê°„~ë†’ìŒ | 1.00~2.00w |

---

## Steps (Pâ†’Piâ†’Bâ†’Oâ†’S + KPI)

### Prepare (P)

* [P0-1] `.env.vercel.production` **git ì¶”ì  ì œê±°** + `.gitignore`ì— `env.vercel.*`/`.env.local` ë“± ì¶”ê°€, ì˜ˆì œ íŒŒì¼ì€ `!.env.vercel.example`ë¡œ ìœ ì§€. ([GitHub][1])
* [P0-2] Vercel í™˜ê²½ë³€ìˆ˜ ìš´ì˜ì„ `vercel env pull`/Dashboardë¡œ í†µì¼(ë ˆí¬ ì»¤ë°‹ ê¸ˆì§€). ([Vercel][2])
* KPI: **Secrets leak 0ê±´**, â€œenv íŒŒì¼ ì»¤ë°‹â€ ì¬ë°œ 0ê±´

### Pilot (Pi)

* [P1-1] DB(ì„ íƒ: Supabase/Vercel Postgres ë“±) 1ê°œ ì„ íƒ í›„ `trip_log`(append-only) í…Œì´ë¸” 1ê°œë§Œìœ¼ë¡œ UI ì—°ê²°
* KPI: **History/Evidence ì €ì¥ ì„±ê³µë¥  99.00%**, ë™ì‹œ ì‚¬ìš©ì 2~3ëª…ì—ì„œ ë°ì´í„° ë¶ˆì¼ì¹˜ 0ê±´

### Build (B)

* [P1-2] `approval_event`, `evidence_item` í™•ì¥ + íŒŒì¼/ë§í¬ ë©”íƒ€ ë¶„ë¦¬
* [P1-3] ViewModeë³„ ì„¹ì…˜ ê°€ì‹œì„±/ì•¡ì…˜ ì œí•œ(Execution=ë³´ê¸°+ì…ë ¥, Planning=ë¦¬í”Œë¡œìš°/í”„ë¦¬ë·°, Governance=ìŠ¹ì¸/ë¹„êµ)
* KPI: **ê²°ì • ê¸°ë¡ ë¦¬ë“œíƒ€ì„ 50.00%â†“**, â€œëˆ„ê°€/ì–¸ì œ/ì™œâ€ ëˆ„ë½ 0ê±´

### Operate (O)

* [P1-4] Gantt ì•ˆì •ì„±: dynamic import + ErrorBoundary + custom fallback + ë¡œë”© skeleton
* KPI: **Gantt ë Œë” ì‹¤íŒ¨ìœ¨ 0.10%â†“**, ì´ˆê¸° ë¡œë”©(TTI) ê°œì„ 

### Scale (S)

* [P2-1] Explainable Reflow: impact top 10, ì—°ì‡„ ì´ìœ (ì˜ì¡´ì„± ì²´ì¸) í‘œì‹œ
* KPI: **ìŠ¹ì¸(Approval) ì†Œìš”ì‹œê°„ 30.00%â†“**, ë³€ê²½ ë°˜ë ¤ìœ¨ ê°ì†Œ

---

## (Auto/QA)

* **Secret scan ê²Œì´íŠ¸**: PRì—ì„œ env/í‚¤ íŒ¨í„´ íƒì§€(ì˜ˆ: gitleaks) + â€œenv íŒŒì¼ ì»¤ë°‹ ì°¨ë‹¨â€ ë£° ì¶”ê°€
* **Smoke**: `pnpm lint` / `pnpm test` / `pnpm build` + (ê°€ëŠ¥í•˜ë©´) e2e 1ê°œ(â€œë¡œê·¸ ì…ë ¥â†’ì €ì¥â†’ì¬ì ‘ì† ìœ ì§€â€)
* **Perf**: Gantt ë Œë”/ë¦¬í”Œë¡œìš° ì‹¤í–‰ ì‹œê°„ ì¸¡ì •(ê¸°ì¤€ì¹˜ ì„¤ì •)

---

## Acc (ê°€ì •:)

* ê°€ì •1: í˜„ì¬ `History/Evidence`ê°€ **ë¸Œë¼ìš°ì € ì €ì¥(localStorage ë“±) ê¸°ë°˜**ì¼ ê°€ëŠ¥ì„±(ë¬¸ì„œì—ì„œ â€œì„œë²„ ì €ì¥â€ í™•ì • ê·¼ê±°ëŠ” ì§€ê¸ˆ í™•ì¸ ë¶ˆê°€).
* ê°€ì •2: DBëŠ” **Supabase/Vercel Postgres ì¤‘ 1ê°œ ì±„íƒ ê°€ëŠ¥**(ê³„ì •/ê¶Œí•œ í™•ë³´ ì „ì œ).
* ê°€ì •3: ViewMode(`Live/History/Approval/Compare`)ëŠ” ìœ ì§€í•˜ë˜, â€œëª¨ë“œë³„ í‘œì‹œ/ê¶Œí•œâ€ë§Œ ì¡°ì •.  

---

## ğŸ”§ /cmd3 (Now / Next / Alt)

**Now (P0 ë³´ì•ˆ PR)**

```bash
# 1) ë ˆí¬ ì¶”ì  ì œê±°(íŒŒì¼ì€ ë¡œì»¬ì— ë‚¨ê¸¸ ìˆ˜ ìˆìŒ)
git rm --cached .env.vercel.production

# 2) .gitignoreì— env íŒŒì¼ íŒ¨í„´ ì¶”ê°€(+ ì˜ˆì œëŠ” ìœ ì§€)
# 3) ì»¤ë°‹
git commit -m "structural(security): stop tracking production env file"
```

**Next (Vercel í‘œì¤€)**

```bash
vercel env pull .env.local
```

([Vercel][2])

**Alt (append-only ì„¤ê³„ ì°¸ê³ )**

* DB ê°ì‚¬ë¡œê·¸ëŠ” `record_version` ê°™ì€ append-onl([GitHub][4])---

## ZERO log

* ZERO(ì¤‘ë‹¨) ì¡°ê±´ ì—†ìŒ(ê·œì •/í†µê´€/HS/ì•ˆì „/ì‹¤ì‹œê°„ ìš”ìœ¨/ë‚ ì”¨ í•´ë‹¹ ì—†ìŒ). ë‹¨, **P0 ë³´ì•ˆ í•­ëª©ì€ ì¦‰ì‹œ ì‹¤í–‰ ê¶Œì¥**. ([GitHub][1])

[1]: https://github.com/macho715/tr_dash.git "GitHub - macho715/tr_dash"
[2]: https://vercel.com/docs/cli/env?utm_source=chatgpt.com "vercel env"
[3]: https://vercel.com/blog/introducing-react-best-practices?utm_source=chatgpt.com "Introducing: React Best Practices - Vercel"
[4]: https://github.com/supabase/supa_audit?utm_source=chatgpt.com "GitHub - supabase/supa_audit: Generic Table Auditing"
